# deploy.yml

name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps: # 'steps:' 아래에 있는 모든 '-'는 같은 위치에서 시작해야 합니다.
      - name: Checkout 🛎️
        uses: actions/checkout@v3

      # 👇 이 단계의 들여쓰기를 아래와 똑같이 맞춰주세요.
      - name: Deploy to GitHub Pages
        # env, uses, with가 모두 같은 수준으로 들여쓰기 되어야 합니다.
        env:
          FIREBASE_SECRET: ${{ secrets.FIREBASE_CONFIG }}
          UNSPLASH_SECRET: ${{ secrets.UNSPLASH_ACCESS_KEY }}
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./
          build_command: |
            sed -i "s|__FIREBASE_CONFIG__|${FIREBASE_SECRET}|g" index.html
            sed -i "s|__UNSPLASH_ACCESS_KEY__|${UNSPLASH_SECRET}|g" index.html
