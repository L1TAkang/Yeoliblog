<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unsplash 이미지 검색</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Pretendard Font -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.min.css" />

  <style>
    body { font-family: 'Pretendard', sans-serif; }
    .modal { display: none; }
    .modal.active { display: flex; }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center p-6">

  <header class="w-full max-w-4xl flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">Unsplash 이미지 검색</h1>
    <button id="openModal" class="px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600">검색</button>
  </header>

  <main id="gallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full max-w-4xl">
    <!-- 이미지가 JS로 추가됨 -->
  </main>

  <!-- Modal -->
  <div id="searchModal" class="modal fixed inset-0 bg-black/50 items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg w-96 shadow-lg relative">
      <button id="closeModal" class="absolute top-3 right-3 text-gray-500 hover:text-black">✕</button>
      <h2 class="text-xl font-semibold mb-4">이미지 검색</h2>
      <input id="searchInput" type="text" placeholder="검색어 입력" class="border w-full p-2 rounded mb-4" />
      <button id="searchBtn" class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600">검색</button>
    </div>
  </div>

  <script>
    const API_KEY = "j2aAp7tav60Xr8k0PlKqKQiVJY_379_KCuc5CJis0CI";
    const gallery = document.getElementById("gallery");
    const modal = document.getElementById("searchModal");
    const openModal = document.getElementById("openModal");
    const closeModal = document.getElementById("closeModal");
    const searchBtn = document.getElementById("searchBtn");
    const searchInput = document.getElementById("searchInput");

    // 기본 인기 이미지 로드
    async function loadImages(query = "nature") {
      gallery.innerHTML = "";
      try {
        const res = await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=12&client_id=${API_KEY}`);
        const data = await res.json();
        if (!data.results || data.results.length === 0) {
          gallery.innerHTML = `<p class="col-span-full text-center text-gray-500">이미지를 찾을 수 없습니다.</p>`;
          return;
        }
        data.results.forEach(img => {
          const imgEl = document.createElement("img");
          imgEl.src = img.urls.small;
          imgEl.alt = img.alt_description || "Unsplash 이미지";
          imgEl.className = "w-full h-48 object-cover rounded-lg shadow";
          gallery.appendChild(imgEl);
        });
      } catch (err) {
        console.error(err);
        gallery.innerHTML = `<p class="col-span-full text-center text-red-500">이미지를 불러오는 중 오류가 발생했습니다.</p>`;
      }
    }

    // 모달 열기/닫기
    openModal.addEventListener("click", () => modal.classList.add("active"));
    closeModal.addEventListener("click", () => modal.classList.remove("active"));

    // 검색 버튼
    searchBtn.addEventListener("click", () => {
      const query = searchInput.value.trim();
      if (query) {
        loadImages(query);
        modal.classList.remove("active");
      }
    });

    // 첫 화면 기본 로드
    loadImages();
  </script>
</body>
</html>
