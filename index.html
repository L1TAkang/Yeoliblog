<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeoli Blog</title>
    
    <!-- Tailwind CSS CDN 불러오기 -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Pretendard 폰트 CDN 불러오기 -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

    <!-- Noto Serif KR 폰트 (Google Fonts) 불러오기 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .font-noto-serif { font-family: 'Noto Serif KR', serif; }
        aside::-webkit-scrollbar { display: none; }
        aside { -ms-overflow-style: none; scrollbar-width: none; }
        main::-webkit-scrollbar { width: 5px; }
        main::-webkit-scrollbar-track { background: transparent; }
        main::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 3px; }
        main::-webkit-scrollbar-thumb:hover { background: #d1d5db; }
        .editor-content:focus { outline: none; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5); }
        #aside-menu { transition: transform 0.3s ease-in-out; }
        blockquote { border-left: 4px solid #1f2937; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #4b5563; }
        .banner-image { width: 100%; height: 300px; object-fit: cover; }
    </style>
</head>
<body class="bg-white text-gray-800 overflow-hidden">

    <!-- 1. 헤더 -->
    <header class="fixed top-0 left-0 w-full h-16 bg-black flex items-center justify-between px-4 md:px-6 z-20">
        <div class="flex items-center">
            <button id="mobile-menu-btn" class="text-white mr-4 md:hidden">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
            <h1 class="text-2xl md:text-3xl font-bold text-white tracking-wider font-noto-serif">Yeoli Blog</h1>
        </div>
        <button id="open-editor-btn" class="text-white hover:text-gray-300 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
        </button>
    </header>
    
    <div id="mobile-menu-overlay" class="hidden fixed inset-0 bg-black/50 z-30 md:hidden"></div>

    <!-- 2. 메인 컨테이너 -->
    <div id="main-container" class="flex pt-16 h-screen"></div>

    <!-- 3. 비밀번호 입력 모달 -->
    <div id="password-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg p-8 shadow-xl w-full max-w-sm">
            <h2 class="text-lg font-bold mb-4">관리자 로그인</h2>
            <form id="password-form">
                <label for="password-input" class="block text-sm font-medium text-gray-700">비밀번호</label>
                <input type="password" id="password-input" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                <div class="mt-4 flex justify-end space-x-2">
                    <button type="button" id="password-cancel" class="px-4 py-2 bg-gray-200 rounded-md">취소</button>
                    <button type="submit" class="px-4 py-2 bg-black text-white rounded-md">확인</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 4. 게시물 편집기 모달 -->
    <div id="editor-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl h-[90vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-bold">게시물 편집기</h2>
                <button id="editor-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div class="flex-grow flex flex-col md:flex-row min-h-0">
                <div class="w-full md:w-1/3 lg:w-1/4 border-b md:border-b-0 md:border-r flex flex-col bg-gray-50">
                    <div id="editor-post-list" class="flex-grow overflow-y-auto p-4"></div>
                    <div class="p-4 border-t">
                        <button id="add-new-post-btn" class="w-full flex items-center justify-center px-4 py-2 bg-black text-white rounded-md">
                            <svg class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                            새 게시물 추가
                        </button>
                    </div>
                </div>
                <div class="w-full md:w-2/3 lg:w-3/4 flex flex-col p-4 overflow-y-auto">
                    <div class="mb-4">
                        <label for="editor-title" class="block text-sm font-medium text-gray-700">제목</label>
                        <input type="text" id="editor-title" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-lg" placeholder="제목을 입력하세요">
                    </div>
                    <div class="mb-4">
                        <button id="add-banner-btn" class="text-sm text-gray-500 hover:text-black flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            배너 추가
                        </button>
                    </div>
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4">
                        <div class="mb-4 sm:mb-0">
                            <label for="editor-date" class="block text-sm font-medium text-gray-700">발행일</label>
                            <input type="date" id="editor-date" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>
                        <div class="flex items-center pt-6">
                            <input id="editor-pin-toggle" type="checkbox" class="h-4 w-4 text-black border-gray-300 rounded">
                            <label for="editor-pin-toggle" class="ml-2 text-sm">게시물 고정</label>
                        </div>
                    </div>
                    <div id="editor-content" contenteditable="true" class="flex-grow border border-gray-300 rounded-md p-2 overflow-y-auto editor-content"></div>
                    <div class="flex flex-col sm:flex-row justify-between items-center mt-4">
                        <button id="editor-delete-btn" class="w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-md mb-2 sm:mb-0">삭제</button>
                        <div class="space-x-2">
                            <button id="editor-cancel-btn" class="px-4 py-2 bg-gray-200 rounded-md">취소</button>
                            <button id="editor-save-btn" class="px-4 py-2 bg-black text-white rounded-md">저장</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 5. 배너 이미지 선택 모달 -->
    <div id="banner-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl h-[70vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <div id="banner-tabs" class="flex space-x-4">
                    <button data-tab="upload" class="tab-btn font-bold border-b-2 border-black">업로드</button>
                    <button data-tab="unsplash" class="tab-btn text-gray-500">Unsplash</button>
                </div>
                <button id="banner-close-btn" class="text-gray-500 text-2xl">&times;</button>
            </div>
            <div class="p-4 flex-grow overflow-y-auto">
                <div id="upload-tab" class="tab-content">
                    <input type="file" id="banner-upload-input" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-50 file:text-black hover:file:bg-gray-100"/>
                </div>
                <div id="unsplash-tab" class="tab-content hidden">
                    <div class="flex mb-4">
                        <input type="text" id="unsplash-search-input" class="flex-grow border border-gray-300 rounded-l-md p-2" placeholder="예: nature, coding...">
                        <button id="unsplash-search-btn" class="bg-black text-white px-4 rounded-r-md">검색</button>
                    </div>
                    <div id="unsplash-results" class="grid grid-cols-3 gap-4"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="custom-alert" class="hidden fixed top-5 right-5 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50">
        <p id="custom-alert-message"></p>
    </div>
    <div id="delete-confirm-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg p-8 shadow-xl w-full max-w-sm">
            <h2 class="text-lg font-bold mb-2">게시물 삭제</h2>
            <p id="delete-confirm-message" class="text-gray-600 mb-6"></p>
            <div class="flex justify-end space-x-2">
                <button id="delete-cancel-btn" class="px-4 py-2 bg-gray-200 rounded-md">취소</button>
                <button id="delete-confirm-btn" class="px-4 py-2 bg-red-600 text-white rounded-md">삭제</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- 로컬 스토리지 함수 ---
        const savePostsToLocalStorage = () => {
            localStorage.setItem('yeoliBlogPosts', JSON.stringify(posts));
        };

        const loadPostsFromLocalStorage = () => {
            const savedPosts = localStorage.getItem('yeoliBlogPosts');
            if (savedPosts) {
                return JSON.parse(savedPosts);
            } else {
                // 로컬 스토리지에 데이터가 없으면 기본 데이터 반환
                return [
                    { id: 1, title: "새로운 시작, 코딩 첫걸음", date: "2025-08-12", content: `<p>코딩의 세계에 오신 것을 환영합니다...</p>`, isPinned: true, bannerUrl: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=2070&auto=format&fit=crop' },
                    { id: 2, title: "CSS 레이아웃의 모든 것", date: "2025-08-10", content: `<p>CSS 레이아웃은 웹 디자인의 뼈대를 만드는 중요한 기술입니다...</p>`, isPinned: false, bannerUrl: null },
                    { id: 3, title: "JavaScript 비동기 처리 이해하기", date: "2025-08-08", content: `<p>Promise와 async/await를 사용하여...</p>`, isPinned: false, bannerUrl: 'https://images.unsplash.com/photo-1526498460520-4c246339dccb?q=80&w=2070&auto=format&fit=crop' }
                ];
            }
        };

        // --- 데이터 관리 ---
        let posts = loadPostsFromLocalStorage(); // 페이지 로드 시 데이터 불러오기
        let currentEditingPostId = null;
        let isCreatingNewPost = false;
        let tempBannerUrl = null;

        // --- DOM 요소 ---
        const mainContainer = document.getElementById('main-container');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const openEditorBtn = document.getElementById('open-editor-btn');
        const passwordModal = document.getElementById('password-modal');
        const passwordForm = document.getElementById('password-form');
        const passwordInput = document.getElementById('password-input');
        const passwordCancelBtn = document.getElementById('password-cancel');
        const editorModal = document.getElementById('editor-modal');
        const editorPostList = document.getElementById('editor-post-list');
        const editorTitle = document.getElementById('editor-title');
        const editorDate = document.getElementById('editor-date');
        const editorPinToggle = document.getElementById('editor-pin-toggle');
        const editorContent = document.getElementById('editor-content');
        const editorSaveBtn = document.getElementById('editor-save-btn');
        const editorDeleteBtn = document.getElementById('editor-delete-btn');
        const editorCloseBtn = document.getElementById('editor-close-btn');
        const editorCancelBtn = document.getElementById('editor-cancel-btn');
        const addNewPostBtn = document.getElementById('add-new-post-btn');
        const addBannerBtn = document.getElementById('add-banner-btn');
        const bannerModal = document.getElementById('banner-modal');
        const bannerCloseBtn = document.getElementById('banner-close-btn');
        const bannerTabs = document.getElementById('banner-tabs');
        const bannerUploadInput = document.getElementById('banner-upload-input');
        const unsplashSearchInput = document.getElementById('unsplash-search-input');
        const unsplashSearchBtn = document.getElementById('unsplash-search-btn');
        const unsplashResults = document.getElementById('unsplash-results');
        const customAlert = document.getElementById('custom-alert');
        const customAlertMessage = document.getElementById('custom-alert-message');
        const deleteConfirmModal = document.getElementById('delete-confirm-modal');
        const deleteConfirmMessage = document.getElementById('delete-confirm-message');
        const deleteConfirmBtn = document.getElementById('delete-confirm-btn');
        const deleteCancelBtn = document.getElementById('delete-cancel-btn');

        function renderBlog() {
            mainContainer.innerHTML = '';
            const aside = document.createElement('aside');
            aside.id = 'aside-menu';
            aside.className = "fixed top-0 left-0 w-4/5 max-w-sm md:w-1/3 lg:w-96 bg-gray-50 h-full overflow-y-auto p-6 transform -translate-x-full md:relative md:translate-x-0 md:h-auto z-40 flex-shrink-0";
            const ul = document.createElement('ul');
            ul.className = 'space-y-1';
            const sortedPosts = [...posts].sort((a, b) => b.isPinned - a.isPinned);
            if (sortedPosts.length > 0) {
                sortedPosts.forEach(post => {
                    const li = document.createElement('li');
                    const pinIconHTML = post.isPinned ? `<div class="w-5 text-center mr-2 flex-shrink-0 text-gray-400">📌</div>` : '<div class="w-5 mr-2 flex-shrink-0"></div>';
                    li.innerHTML = `<a href="#post-${post.id}" data-id="${post.id}" class="post-link flex items-center p-3 rounded-lg hover:bg-white hover:shadow-sm transition-all">${pinIconHTML}<span class="flex-1 truncate">${post.title}</span></a>`;
                    ul.appendChild(li);
                });
            }
            aside.appendChild(ul);
            const main = document.createElement('main');
            main.className = "w-full md:flex-grow h-full overflow-y-auto p-8 md:p-12";
            main.innerHTML = `<div id="post-content-wrapper" class="w-full"></div>`;
            mainContainer.appendChild(aside);
            mainContainer.appendChild(main);
            const firstPostToShow = sortedPosts[0];
            if (firstPostToShow) {
                renderPostContent(firstPostToShow.id);
                highlightActiveLink(firstPostToShow.id);
            } else {
                document.getElementById('post-content-wrapper').innerHTML = `<div class="text-center text-gray-500">게시물이 없습니다.</div>`;
            }
        }

        function renderPostContent(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            const wrapper = document.getElementById('post-content-wrapper');
            if(wrapper) {
                // 수정됨: rounded-lg 클래스 제거
                const bannerHTML = post.bannerUrl ? `<img src="${post.bannerUrl}" alt="Banner Image" class="banner-image mb-8">` : '';
                wrapper.innerHTML = `<article class="max-w-3xl w-full mx-auto">${bannerHTML}<h3 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">${post.title}</h3><p class="text-gray-500 mb-8">${new Date(post.date).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}</p><div class="space-y-6 text-lg leading-relaxed text-gray-700">${post.content}</div></article>`;
            }
        }
        
        function highlightActiveLink(postId) {
            document.querySelectorAll('.post-link').forEach(link => {
                const isMatch = parseInt(link.dataset.id) === postId;
                link.classList.toggle('bg-white', isMatch);
                link.classList.toggle('font-semibold', isMatch);
                link.classList.toggle('text-gray-900', isMatch);
                link.classList.toggle('shadow-sm', isMatch);
            });
        }

        mainContainer.addEventListener('click', (e) => {
            if (e.target.closest('.post-link')) {
                e.preventDefault();
                const link = e.target.closest('.post-link');
                const postId = parseInt(link.dataset.id);
                renderPostContent(postId);
                highlightActiveLink(postId);
                if (window.innerWidth < 768) {
                    toggleMobileMenu(false);
                }
            }
        });

        function showAlert(message, isError = false) {
            customAlertMessage.textContent = message;
            customAlert.classList.toggle('bg-red-500', isError);
            customAlert.classList.toggle('bg-green-500', !isError);
            customAlert.classList.remove('hidden');
            setTimeout(() => customAlert.classList.add('hidden'), 3000);
        }
        
        function toggleMobileMenu(show) {
            const asideMenu = document.getElementById('aside-menu');
            if (show) {
                mobileMenuOverlay.classList.remove('hidden');
                asideMenu.classList.remove('-translate-x-full');
            } else {
                mobileMenuOverlay.classList.add('hidden');
                asideMenu.classList.add('-translate-x-full');
            }
        }
        mobileMenuBtn.addEventListener('click', () => toggleMobileMenu(true));
        mobileMenuOverlay.addEventListener('click', () => toggleMobileMenu(false));

        openEditorBtn.addEventListener('click', () => {
            passwordModal.classList.remove('hidden');
            passwordInput.focus();
        });

        function closePasswordModal() {
            passwordModal.classList.add('hidden');
            passwordForm.reset();
        }
        passwordCancelBtn.addEventListener('click', closePasswordModal);

        passwordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const correctPasswordHash = "MTIzMQ==";
            if (btoa(passwordInput.value) === correctPasswordHash) {
                closePasswordModal();
                openEditor();
            } else {
                showAlert("비밀번호가 틀렸습니다.", true);
            }
        });

        function openEditor() {
            populateEditorPostList();
            editorModal.classList.remove('hidden');
            if (posts.length > 0) {
                const firstPostId = [...posts].sort((a,b) => b.isPinned - a.isPinned)[0].id;
                loadPostInEditor(firstPostId);
            } else {
                startNewPost();
            }
        }

        function closeEditor() {
            editorModal.classList.add('hidden');
            currentEditingPostId = null;
            isCreatingNewPost = false;
        }
        editorCloseBtn.addEventListener('click', closeEditor);
        editorCancelBtn.addEventListener('click', closeEditor);

        function populateEditorPostList() {
            editorPostList.innerHTML = '';
            const ul = document.createElement('ul');
            ul.className = 'space-y-1';
            const sortedPosts = [...posts].sort((a, b) => b.isPinned - a.isPinned);
            sortedPosts.forEach(post => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" data-id="${post.id}" class="editor-post-link block p-2 rounded-md hover:bg-gray-200 truncate">${post.title}</a>`;
                ul.appendChild(li);
            });
            editorPostList.appendChild(ul);
        }
        
        editorPostList.addEventListener('click', (e) => {
            if (e.target.closest('.editor-post-link')) {
                e.preventDefault();
                const link = e.target.closest('.editor-post-link');
                const postId = parseInt(link.dataset.id);
                loadPostInEditor(postId);
            }
        });

        function loadPostInEditor(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            isCreatingNewPost = false;
            editorDeleteBtn.disabled = false;
            currentEditingPostId = postId;
            tempBannerUrl = post.bannerUrl;
            editorTitle.value = post.title;
            editorDate.value = post.date;
            editorPinToggle.checked = post.isPinned;
            editorContent.innerHTML = post.content;
            editorSaveBtn.textContent = "수정 완료";
            document.querySelectorAll('.editor-post-link').forEach(link => {
                link.classList.toggle('bg-gray-300', parseInt(link.dataset.id) === postId);
                link.classList.toggle('font-semibold', parseInt(link.dataset.id) === postId);
            });
        }

        addNewPostBtn.addEventListener('click', startNewPost);

        function startNewPost() {
            isCreatingNewPost = true;
            editorDeleteBtn.disabled = true;
            currentEditingPostId = null;
            tempBannerUrl = null;
            editorTitle.value = "새로운 게시물";
            editorDate.valueAsDate = new Date();
            editorPinToggle.checked = false;
            editorContent.innerHTML = "<p>여기에 내용을 입력하세요.</p>";
            editorSaveBtn.textContent = "게시물 발행";
            document.querySelectorAll('.editor-post-link').forEach(link => {
                link.classList.remove('bg-gray-300', 'font-semibold');
            });
            editorTitle.focus();
        }

        editorContent.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'q') {
                e.preventDefault();
                document.execCommand('formatBlock', false, 'blockquote');
            }
        });

        editorDeleteBtn.addEventListener('click', () => {
            if (isCreatingNewPost || currentEditingPostId === null) return;
            const postToDelete = posts.find(p => p.id === currentEditingPostId);
            if (postToDelete) {
                deleteConfirmMessage.textContent = `'${postToDelete.title}' 게시물을 정말 삭제하시겠습니까?`;
                deleteConfirmModal.classList.remove('hidden');
            }
        });

        deleteCancelBtn.addEventListener('click', () => deleteConfirmModal.classList.add('hidden'));
        deleteConfirmBtn.addEventListener('click', () => {
            if (currentEditingPostId === null) return;
            posts = posts.filter(p => p.id !== currentEditingPostId);
            savePostsToLocalStorage(); // 변경사항 저장
            deleteConfirmModal.classList.add('hidden');
            showAlert("게시물이 삭제되었습니다.");
            renderBlog();
            populateEditorPostList();
            startNewPost();
        });

        editorSaveBtn.addEventListener('click', () => {
            let savedPostId;
            if (isCreatingNewPost) {
                const newPost = { id: Date.now(), title: editorTitle.value, date: editorDate.value, content: editorContent.innerHTML, isPinned: editorPinToggle.checked, bannerUrl: tempBannerUrl };
                posts.unshift(newPost);
                savedPostId = newPost.id;
                showAlert("새 게시물이 발행되었습니다.");
            } else {
                if (currentEditingPostId === null) return;
                const postIndex = posts.findIndex(p => p.id === currentEditingPostId);
                if (postIndex === -1) return;
                posts[postIndex] = { ...posts[postIndex], title: editorTitle.value, date: editorDate.value, content: editorContent.innerHTML, isPinned: editorPinToggle.checked, bannerUrl: tempBannerUrl };
                savedPostId = currentEditingPostId;
                showAlert("게시물이 성공적으로 수정되었습니다.");
            }
            savePostsToLocalStorage(); // 변경사항 저장
            renderBlog();
            populateEditorPostList();
            loadPostInEditor(savedPostId);
        });

        // Banner Modal Logic
        addBannerBtn.addEventListener('click', () => bannerModal.classList.remove('hidden'));
        bannerCloseBtn.addEventListener('click', () => bannerModal.classList.add('hidden'));
        
        bannerTabs.addEventListener('click', (e) => {
            if(e.target.classList.contains('tab-btn')) {
                const tabName = e.target.dataset.tab;
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.toggle('font-bold', btn.dataset.tab === tabName);
                    btn.classList.toggle('border-b-2', btn.dataset.tab === tabName);
                    btn.classList.toggle('border-black', btn.dataset.tab === tabName);
                    btn.classList.toggle('text-gray-500', btn.dataset.tab !== tabName);
                });
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.toggle('hidden', content.id !== `${tabName}-tab`);
                });
            }
        });

        bannerUploadInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    tempBannerUrl = event.target.result;
                    showAlert('배너 이미지가 설정되었습니다.');
                    bannerModal.classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        async function searchUnsplash(query) {
            unsplashResults.innerHTML = '';
            const loading = document.createElement('p');
            loading.className = 'text-gray-500';
            loading.textContent = '이미지를 불러오는 중...';
            unsplashResults.appendChild(loading);
            
            try {
                // Unsplash는 Access Key가 필요합니다. 데모용으로 플레이스홀더 이미지를 사용합니다.
                const demoImages = Array.from({length: 6}, (_, i) => `https://source.unsplash.com/400x300/?${query},${i+1}`);
                
                loading.remove();
                
                demoImages.forEach(url => {
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'cursor-pointer aspect-w-4 aspect-h-3';
                    imgContainer.innerHTML = `<img src="${url}" class="w-full h-full object-cover rounded-md">`;
                    imgContainer.onclick = () => {
                        tempBannerUrl = url.replace('400x300', '1600x900'); // 더 큰 이미지로 설정
                        showAlert('배너 이미지가 설정되었습니다.');
                        bannerModal.classList.add('hidden');
                    };
                    unsplashResults.appendChild(imgContainer);
                });
            } catch (error) {
                unsplashResults.innerHTML = '<p class="text-red-500">이미지를 불러오는 데 실패했습니다.</p>';
            }
        }
        unsplashSearchBtn.addEventListener('click', () => searchUnsplash(unsplashSearchInput.value));
        unsplashSearchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') searchUnsplash(e.target.value);
        });
        
        renderBlog();
    });
    </script>
</body>
</html>
