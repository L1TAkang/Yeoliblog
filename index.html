<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeoli Blog</title>
    
    <!-- Tailwind CSS CDN ë¶ˆëŸ¬ì˜¤ê¸° -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Pretendard í°íŠ¸ CDN ë¶ˆëŸ¬ì˜¤ê¸° -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

    <!-- Noto Serif KR í°íŠ¸ (Google Fonts) ë¶ˆëŸ¬ì˜¤ê¸° -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ê¸°ë³¸ í°íŠ¸ ë° ìŠ¤íƒ€ì¼ */
        body { font-family: 'Pretendard', sans-serif; }
        .font-noto-serif { font-family: 'Noto Serif KR', serif; }

        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ì™¼ìª½ íŒ¨ë„) */
        aside::-webkit-scrollbar { display: none; }
        aside { -ms-overflow-style: none; scrollbar-width: none; }

        /* ìŠ¤í¬ë¡¤ë°” ë””ìì¸ (ì˜¤ë¥¸ìª½ íŒ¨ë„) */
        main::-webkit-scrollbar { width: 5px; }
        main::-webkit-scrollbar-track { background: transparent; }
        main::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 3px; }
        main::-webkit-scrollbar-thumb:hover { background: #d1d5db; }

        /* í¸ì§‘ê¸° ë‚´ìš© ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .editor-content:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body class="bg-white text-gray-800 overflow-hidden">

    <!-- 1. í—¤ë” -->
    <header class="fixed top-0 left-0 w-full h-16 bg-black flex items-center justify-between px-6 z-10">
        <h1 class="text-3xl font-bold text-white tracking-wider font-noto-serif">Yeoli Blog</h1>
        <button id="open-editor-btn" class="text-white hover:text-gray-300 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
        </button>
    </header>

    <!-- 2. ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div id="main-container" class="flex pt-16">
        <!-- JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤. -->
    </div>

    <!-- 3. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ëª¨ë‹¬ -->
    <div id="password-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 shadow-xl">
            <h2 class="text-lg font-bold mb-4">ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
            <form id="password-form">
                <label for="password-input" class="block text-sm font-medium text-gray-700">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</label>
                <input type="password" id="password-input" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-black focus:border-black sm:text-sm">
                <div class="mt-4 flex justify-end space-x-2">
                    <button type="button" id="password-cancel" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">ì·¨ì†Œ</button>
                    <button type="submit" class="px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800">í™•ì¸</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 4. ê²Œì‹œë¬¼ í¸ì§‘ê¸° ëª¨ë‹¬ -->
    <div id="editor-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl h-[90vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-bold">ê²Œì‹œë¬¼ í¸ì§‘ê¸°</h2>
                <button id="editor-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl leading-none">&times;</button>
            </div>
            <div class="flex-grow flex min-h-0">
                <div class="w-1/4 border-r flex flex-col bg-gray-50">
                    <div id="editor-post-list" class="flex-grow overflow-y-auto p-4"></div>
                    <div class="p-4 border-t">
                        <button id="add-new-post-btn" class="w-full flex items-center justify-center px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" /></svg>
                            ìƒˆ ê²Œì‹œë¬¼ ì¶”ê°€
                        </button>
                    </div>
                </div>
                <div class="w-3/4 flex flex-col p-4 overflow-y-auto">
                    <div class="mb-4">
                        <label for="editor-title" class="block text-sm font-medium text-gray-700">ì œëª©</label>
                        <input type="text" id="editor-title" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                    </div>
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <label for="editor-date" class="block text-sm font-medium text-gray-700">ë°œí–‰ì¼</label>
                            <input type="date" id="editor-date" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>
                        <div class="flex items-center pt-6">
                            <input id="editor-pin-toggle" type="checkbox" class="h-4 w-4 text-black border-gray-300 rounded focus:ring-black">
                            <label for="editor-pin-toggle" class="ml-2 block text-sm font-medium text-gray-900">ê²Œì‹œë¬¼ ê³ ì •</label>
                        </div>
                    </div>
                    <div class="mb-4 flex-grow flex flex-col">
                        <label class="block text-sm font-medium text-gray-700 mb-1">ë‚´ìš©</label>
                        <div id="editor-content" contenteditable="true" class="flex-grow border border-gray-300 rounded-md p-2 overflow-y-auto editor-content"></div>
                    </div>
                    <div class="flex justify-between items-center">
                        <button id="editor-delete-btn" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed">ì‚­ì œ</button>
                        <div class="space-x-2">
                            <button id="editor-cancel-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">ì·¨ì†Œ</button>
                            <button id="editor-save-btn" class="px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800">ì €ì¥</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 5. ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ -->
    <div id="custom-alert" class="hidden fixed top-5 right-5 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
        <p id="custom-alert-message"></p>
    </div>

    <!-- 6. ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
    <div id="delete-confirm-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 shadow-xl w-full max-w-sm">
            <h2 class="text-lg font-bold mb-2">ê²Œì‹œë¬¼ ì‚­ì œ</h2>
            <p id="delete-confirm-message" class="text-gray-600 mb-6"></p>
            <div class="flex justify-end space-x-2">
                <button type="button" id="delete-cancel-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">ì·¨ì†Œ</button>
                <button type="button" id="delete-confirm-btn" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">ì‚­ì œ</button>
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- ë°ì´í„° ê´€ë¦¬ ---
        // ì¤‘ìš”: ì´ ë°ì´í„°ëŠ” í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
        // ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ë ¤ë©´ Firebase, Supabase ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ GitHub APIë¥¼ ì—°ë™í•´ì•¼ í•©ë‹ˆë‹¤.
        let posts = [
            { id: 1, title: "ìƒˆë¡œìš´ ì‹œì‘, ì½”ë”© ì²«ê±¸ìŒ", date: "2025-08-12", content: `<p>ì½”ë”©ì˜ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ ê³µê°„ì€ ë‹¹ì‹ ì˜ ì•„ì´ë””ì–´ê°€ í˜„ì‹¤ì´ ë˜ëŠ” ê³³ì…ë‹ˆë‹¤. ì²˜ìŒì—ëŠ” ëª¨ë“  ê²ƒì´ ë‚¯ì„¤ê³  ë³µì¡í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì§€ë§Œ, í•œ ê±¸ìŒì”© ë‚˜ì•„ê°€ë‹¤ ë³´ë©´ ì–´ëŠìƒˆ ë©‹ì§„ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚´ëŠ” ìì‹ ì„ ë°œê²¬í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.</p><figure><img src="https://placehold.co/800x400/e2e8f0/334155?text=Code+Snippet" alt="Code Snippet Placeholder" class="rounded-lg shadow-md my-4"><figcaption class="text-center text-sm text-gray-500 mt-2">ì´ê³³ì— ì´ë¯¸ì§€ë‚˜ ì½”ë“œ ë¸”ë¡ì„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</figcaption></figure><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p><blockquote class="border-l-4 border-gray-900 pl-4 italic text-gray-600 my-4">"The only way to do great work is to love what you do." - Steve Jobs</blockquote>`, isPinned: true },
            { id: 2, title: "CSS ë ˆì´ì•„ì›ƒì˜ ëª¨ë“  ê²ƒ", date: "2025-08-10", content: `<p>CSS ë ˆì´ì•„ì›ƒì€ ì›¹ ë””ìì¸ì˜ ë¼ˆëŒ€ë¥¼ ë§Œë“œëŠ” ì¤‘ìš”í•œ ê¸°ìˆ ì…ë‹ˆë‹¤. Flexboxì™€ Gridì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.</p>`, isPinned: false },
            { id: 3, title: "JavaScript ë¹„ë™ê¸° ì²˜ë¦¬ ì´í•´í•˜ê¸°", date: "2025-08-08", content: `<p>Promiseì™€ async/awaitë¥¼ ì‚¬ìš©í•˜ì—¬ JavaScriptì˜ ë¹„ë™ê¸° ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ì‘ì„±í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.</p>`, isPinned: false }
        ];
        let currentEditingPostId = null;
        let isCreatingNewPost = false;

        // --- DOM ìš”ì†Œ ---
        const mainContainer = document.getElementById('main-container');
        const openEditorBtn = document.getElementById('open-editor-btn');
        const passwordModal = document.getElementById('password-modal');
        const passwordForm = document.getElementById('password-form');
        const passwordInput = document.getElementById('password-input');
        const passwordCancelBtn = document.getElementById('password-cancel');
        const editorModal = document.getElementById('editor-modal');
        const editorPostList = document.getElementById('editor-post-list');
        const editorTitle = document.getElementById('editor-title');
        const editorDate = document.getElementById('editor-date');
        const editorPinToggle = document.getElementById('editor-pin-toggle');
        const editorContent = document.getElementById('editor-content');
        const editorSaveBtn = document.getElementById('editor-save-btn');
        const editorDeleteBtn = document.getElementById('editor-delete-btn');
        const editorCloseBtn = document.getElementById('editor-close-btn');
        const editorCancelBtn = document.getElementById('editor-cancel-btn');
        const addNewPostBtn = document.getElementById('add-new-post-btn');
        const customAlert = document.getElementById('custom-alert');
        const customAlertMessage = document.getElementById('custom-alert-message');
        const deleteConfirmModal = document.getElementById('delete-confirm-modal');
        const deleteConfirmMessage = document.getElementById('delete-confirm-message');
        const deleteConfirmBtn = document.getElementById('delete-confirm-btn');
        const deleteCancelBtn = document.getElementById('delete-cancel-btn');

        // --- ë Œë”ë§ í•¨ìˆ˜ ---
        function renderBlog() {
            mainContainer.innerHTML = '';
            const aside = document.createElement('aside');
            aside.className = "w-1/3 bg-gray-50 h-screen overflow-y-auto p-6";
            
            const ul = document.createElement('ul');
            ul.className = 'space-y-1';

            const sortedPosts = [...posts].sort((a, b) => b.isPinned - a.isPinned);

            if (sortedPosts.length > 0) {
                sortedPosts.forEach(post => {
                    const li = document.createElement('li');
                    const pinIconHTML = post.isPinned ? `<div class="w-5 text-center mr-2 flex-shrink-0 text-gray-400">ğŸ“Œ</div>` : '<div class="w-5 mr-2 flex-shrink-0"></div>';
                    li.innerHTML = `<a href="#post-${post.id}" data-id="${post.id}" class="post-link flex items-center p-3 rounded-lg hover:bg-white hover:shadow-sm transition-all">${pinIconHTML}<span class="flex-1">${post.title}</span></a>`;
                    ul.appendChild(li);
                });
            }
            
            aside.appendChild(ul);

            const main = document.createElement('main');
            main.className = "w-2/3 h-screen overflow-y-auto p-8 md:p-12";
            main.innerHTML = `<div id="post-content-wrapper"></div>`;
            mainContainer.appendChild(aside);
            mainContainer.appendChild(main);

            const firstPostToShow = sortedPosts[0];
            if (firstPostToShow) {
                renderPostContent(firstPostToShow.id);
                highlightActiveLink(firstPostToShow.id);
            } else {
                document.getElementById('post-content-wrapper').innerHTML = `<div class="text-center text-gray-500">ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
            }
        }

        function renderPostContent(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            const wrapper = document.getElementById('post-content-wrapper');
            wrapper.innerHTML = `<article class="max-w-3xl mx-auto"><h3 class="text-4xl font-bold text-gray-900 mb-4">${post.title}</h3><p class="text-gray-500 mb-8">${new Date(post.date).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}</p><div class="space-y-6 text-lg leading-relaxed text-gray-700">${post.content}</div></article>`;
        }
        
        function highlightActiveLink(postId) {
            document.querySelectorAll('.post-link').forEach(link => {
                const isMatch = parseInt(link.dataset.id) === postId;
                link.classList.toggle('bg-white', isMatch);
                link.classList.toggle('font-semibold', isMatch);
                link.classList.toggle('text-gray-900', isMatch);
                link.classList.toggle('shadow-sm', isMatch);
            });
        }

        mainContainer.addEventListener('click', (e) => {
            if (e.target.closest('.post-link')) {
                e.preventDefault();
                const link = e.target.closest('.post-link');
                const postId = parseInt(link.dataset.id);
                renderPostContent(postId);
                highlightActiveLink(postId);
            }
        });

        function showAlert(message, isError = false) {
            customAlertMessage.textContent = message;
            customAlert.classList.toggle('bg-red-500', isError);
            customAlert.classList.toggle('bg-green-500', !isError);
            customAlert.classList.remove('hidden');
            setTimeout(() => customAlert.classList.add('hidden'), 3000);
        }

        openEditorBtn.addEventListener('click', () => {
            passwordModal.classList.remove('hidden');
            passwordInput.focus();
        });

        function closePasswordModal() {
            passwordModal.classList.add('hidden');
            passwordForm.reset();
        }
        passwordCancelBtn.addEventListener('click', closePasswordModal);

        passwordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const correctPasswordHash = "MTIzMQ==";
            if (btoa(passwordInput.value) === correctPasswordHash) {
                closePasswordModal();
                openEditor();
            } else {
                showAlert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.", true);
                passwordForm.reset();
            }
        });

        function openEditor() {
            populateEditorPostList();
            editorModal.classList.remove('hidden');
            if (posts.length > 0) {
                const firstPostId = [...posts].sort((a,b) => b.isPinned - a.isPinned)[0].id;
                loadPostInEditor(firstPostId);
            } else {
                startNewPost();
            }
        }

        function closeEditor() {
            editorModal.classList.add('hidden');
            currentEditingPostId = null;
            isCreatingNewPost = false;
        }
        editorCloseBtn.addEventListener('click', closeEditor);
        editorCancelBtn.addEventListener('click', closeEditor);

        function populateEditorPostList() {
            editorPostList.innerHTML = '';
            const ul = document.createElement('ul');
            ul.className = 'space-y-1';
            const sortedPosts = [...posts].sort((a, b) => b.isPinned - a.isPinned);
            sortedPosts.forEach(post => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" data-id="${post.id}" class="editor-post-link block p-2 rounded-md hover:bg-gray-200">${post.title}</a>`;
                ul.appendChild(li);
            });
            editorPostList.appendChild(ul);
        }
        
        editorPostList.addEventListener('click', (e) => {
            if (e.target.closest('.editor-post-link')) {
                e.preventDefault();
                const link = e.target.closest('.editor-post-link');
                const postId = parseInt(link.dataset.id);
                loadPostInEditor(postId);
            }
        });

        function loadPostInEditor(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            isCreatingNewPost = false;
            editorDeleteBtn.disabled = false;
            currentEditingPostId = postId;
            editorTitle.value = post.title;
            editorDate.value = post.date;
            editorPinToggle.checked = post.isPinned;
            editorContent.innerHTML = post.content;
            editorSaveBtn.textContent = "ìˆ˜ì • ì™„ë£Œ";
            
            document.querySelectorAll('.editor-post-link').forEach(link => {
                link.classList.toggle('bg-gray-300', parseInt(link.dataset.id) === postId);
                link.classList.toggle('font-semibold', parseInt(link.dataset.id) === postId);
            });
        }

        addNewPostBtn.addEventListener('click', startNewPost);

        function startNewPost() {
            isCreatingNewPost = true;
            editorDeleteBtn.disabled = true;
            currentEditingPostId = null;
            editorTitle.value = "ìƒˆë¡œìš´ ê²Œì‹œë¬¼";
            editorDate.valueAsDate = new Date();
            editorPinToggle.checked = false;
            editorContent.innerHTML = "<p>ì—¬ê¸°ì— ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.</p>";
            editorSaveBtn.textContent = "ê²Œì‹œë¬¼ ë°œí–‰";
            
            document.querySelectorAll('.editor-post-link').forEach(link => {
                link.classList.remove('bg-gray-300', 'font-semibold');
            });
            editorTitle.focus();
        }

        editorDeleteBtn.addEventListener('click', () => {
            if (isCreatingNewPost || currentEditingPostId === null) return;
            const postToDelete = posts.find(p => p.id === currentEditingPostId);
            if (postToDelete) {
                deleteConfirmMessage.textContent = `'${postToDelete.title}' ê²Œì‹œë¬¼ì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
                deleteConfirmModal.classList.remove('hidden');
            }
        });

        deleteCancelBtn.addEventListener('click', () => {
            deleteConfirmModal.classList.add('hidden');
        });

        deleteConfirmBtn.addEventListener('click', () => {
            if (currentEditingPostId === null) return;
            posts = posts.filter(p => p.id !== currentEditingPostId);
            deleteConfirmModal.classList.add('hidden');
            showAlert("ê²Œì‹œë¬¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            renderBlog();
            populateEditorPostList();
            startNewPost();
        });

        editorSaveBtn.addEventListener('click', () => {
            let savedPostId;
            if (isCreatingNewPost) {
                const newPost = {
                    id: Date.now(),
                    title: editorTitle.value,
                    date: editorDate.value,
                    content: editorContent.innerHTML,
                    isPinned: editorPinToggle.checked
                };
                posts.unshift(newPost);
                savedPostId = newPost.id;
                showAlert("ìƒˆ ê²Œì‹œë¬¼ì´ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else {
                if (currentEditingPostId === null) return;
                const postIndex = posts.findIndex(p => p.id === currentEditingPostId);
                if (postIndex === -1) return;
                posts[postIndex].title = editorTitle.value;
                posts[postIndex].date = editorDate.value;
                posts[postIndex].content = editorContent.innerHTML;
                posts[postIndex].isPinned = editorPinToggle.checked;
                savedPostId = currentEditingPostId;
                showAlert("ê²Œì‹œë¬¼ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
            
            renderBlog();
            populateEditorPostList();
            loadPostInEditor(savedPostId);
        });

        renderBlog();
    });
    </script>
</body>
</html>
